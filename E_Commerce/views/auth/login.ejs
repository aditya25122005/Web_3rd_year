<% layout('layouts/boilerplate') %>

<div class="auth-background">
    <div class="container my-5">
        <div class="row">
            <div class="col-md-6 mx-auto">
                <div class="card shadow-lg border-0 rounded-4 login-card">
                    <div class="card-body p-4 p-md-5">
                        <h1 class="card-title text-center fw-bold mb-4">Log In to Cartify</h1>
                        <%- include('../partials/flash') %>
                        <form action="/login" method="post" class="needs-validation" novalidate>
                            <div class="form-floating mb-3">
                                <input class="form-control" type="text" name="username" id="username" placeholder="Username" required>
                                <label for="username">Username</label>
                                <div class="invalid-feedback">
                                    Please enter your username.
                                </div>
                            </div>

                            <div class="form-floating mb-3">
                                <input class="form-control" type="password" name="password" id="password" placeholder="Password" required>
                                <label for="password">Password</label>
                                <div class="invalid-feedback">
                                    Please enter your password.
                                </div>
                            </div>

                            <div class="d-grid mb-3">
                                <button type="submit" class="btn btn-primary btn-lg fw-bold rounded-pill login-btn">Log In</button>
                            </div>

                            <p class="text-center mt-3 mb-0 text-muted">Don't have an account? <a href="/register" class="text-decoration-none fw-semibold">Sign Up</a></p>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');

    body {
        font-family: 'Poppins', sans-serif;
        background-color: #f0f2f5; /* Fallback color */
    }

    .auth-background {
        position: fixed; /* Fixes the background to the viewport */
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background: url('https://images.unsplash.com/32/Mc8kW4x9Q3aRR3RkP5Im_IMG_4417.jpg?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8YmFja2dyb3VuZHxlbnwwfHwwfHx8MA%3D%3D') no-repeat center center;
        background-size: cover;
        display: flex; /* Centers the content vertically */
        align-items: center;
        justify-content: center;
        overflow-y: auto; /* Allows scrolling if content is too tall */
    }

    .auth-background::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5); /* Darker overlay for better readability */
        z-index: 0; /* Ensure overlay is behind content */
    }

    .container {
        position: relative;
        z-index: 1; /* Ensure content is above the overlay */
    }

    .login-card {
        background-color: rgba(255, 255, 255, 0.95); /* Slightly transparent white card */
        border-radius: 15px; /* More rounded corners for the card */
        transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        max-width: 450px; /* Constrain card width for better aesthetics */
        margin: auto; /* Center card horizontally */
    }

    .login-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2); /* Enhanced shadow on hover */
    }

    .card-title {
        color: #333; /* Darker title for contrast */
        font-size: 2rem;
    }

    .form-floating label {
        color: #6c757d;
    }

    .form-control:focus {
        border-color: #0d6efd;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    }

    .login-btn {
        transition: background-color 0.3s ease-in-out, transform 0.3s ease-in-out;
        background-color: #28a745; /* Green button for "Log In" */
        border-color: #28a745;
    }

    .login-btn:hover {
        transform: scale(1.02);
        background-color: #218838;
        border-color: #1e7e34;
    }

    /* Adjustments for smaller screens */
    @media (max-width: 768px) {
        .login-card {
            margin: 1rem;
        }
    }
</style>